# GUI XY扰动功能使用指南

## 新增功能概览

在Railway Controller系统的图形界面中新增了XY扰动配置功能，现在可以通过GUI直接配置和启动带扰动的模拟硬件。

## 界面功能

### 1. XY扰动配置区域
在"模拟硬件端口配置"下方新增扰动配置选项：

- **✅ 启用XY扰动**：复选框，默认勾选
- **幅度输入框**：设置扰动幅度（mm），默认3.0mm
- **频率输入框**：设置扰动频率（Hz），默认0.3Hz

### 2. 状态显示增强
启动模拟硬件后，状态标签会显示扰动参数：
```
状态: 运行中 (COM2, COM4) [XY扰动: 3.0mm@0.3Hz]
```

### 3. 日志信息
启动模拟硬件时，日志会记录完整的扰动配置：
```
模拟硬件已启动: 控制口=COM2, 遥测口=COM4, XY扰动=3.0mm@0.3Hz
```

## 使用流程

### 步骤1：配置扰动参数
1. 在GUI中找到"模拟硬件端口配置"区域
2. 确保"启用XY扰动"复选框已勾选
3. 设置扰动幅度（建议1-5mm）
4. 设置扰动频率（建议0.1-1.0Hz）

### 步骤2：配置端口
1. 设置控制口（如COM2）
2. 设置遥测口（如COM4）

### 步骤3：启动模拟硬件
1. 点击"启动模拟硬件"按钮
2. 观察状态显示和日志信息
3. 确认扰动参数已正确应用

### 步骤4：观察扰动效果
1. 在XY坐标图中观察腿子位置的动态变化
2. 查看几何中心的实时响应
3. 验证控制系统的抗扰动能力

## 扰动参数建议

### 不同测试场景：

**🟢 轻微扰动（系统验证）**
- 幅度：1.0-2.0mm
- 频率：0.1-0.2Hz
- 适用：日常功能测试

**🟡 中等扰动（鲁棒性测试）**
- 幅度：3.0-5.0mm（默认）
- 频率：0.3-0.5Hz（默认）
- 适用：系统稳定性验证

**🔴 强扰动（极限测试）**
- 幅度：5.0-10.0mm
- 频率：0.5-1.0Hz
- 适用：极限工况测试

## 技术细节

### GUI实现
- 在`gui_controller.py`中新增扰动配置变量
- 启动命令自动包含扰动参数
- 实时状态显示扰动配置

### 命令生成
启用扰动时的完整命令：
```bash
python -m hardware.mock_serial_device --ctrl-port COM2 --telem-port COM4 --baud 115200 --telem-interval 0.1 --xy-disturbance --disturbance-amplitude 3.0 --disturbance-frequency 0.3
```

### 兼容性
- 不启用扰动时，命令中不包含扰动参数
- 完全兼容原有功能
- 可随时通过复选框开启/关闭

## 验证方法

1. **启动GUI**：`python main.py`
2. **配置参数**：在界面中设置扰动参数
3. **启动设备**：点击"启动模拟硬件"按钮
4. **观察效果**：查看XY坐标图中的位置变化
5. **监控系统**：验证几何中心计算的稳定性

通过这个增强的GUI界面，您可以更方便地进行带扰动的系统测试，实时调整参数并观察系统响应！
