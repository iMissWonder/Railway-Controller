# 单腿控制界面功能说明

## 功能概述
本次更新为道岔腿子控制系统添加了单腿控制界面功能，允许用户对单个腿子进行精确控制和监控。

## 主要功能

### 1. 单腿控制按钮
- 位置：主界面右上角
- 功能：点击打开单腿控制界面
- 样式：与其他控制按钮保持一致

### 2. 单腿控制界面布局
- **左侧（60%区域）**：单腿子模型展示
  - 显示选中腿子的详细信息
  - 实时显示位置坐标（X, Y, Z）
  - 显示当前受力状态
  - 腿子图形化表示（绿色为选中，红色为未选中）

- **右侧（40%区域）**：控制操作区
  - 上方：十字键控制区域
  - 下方：腿子选择按钮区域

### 3. 十字键控制
- 布局：类似手柄的十字键布局
- 按钮：上、下、左、右四个方向按钮
- 中心显示：显示当前操作的腿子编号（如"腿子1"）
- 功能：点击可发送对应方向的移动指令

### 4. 腿子选择
- 12个按钮对应腿子1-12
- 布局：4行3列排列
- 功能：点击切换选中的腿子
- 状态指示：选中的腿子按钮高亮显示

### 5. 颜色状态系统
- **红色腿子**：普通状态，未被选中
- **绿色腿子**：当前选中状态
- **自动切换**：
  - 选择新腿子时，原腿子变红，新腿子变绿
  - 关闭单腿控制界面后，所有腿子恢复红色

### 6. 主界面图表更新
- XY坐标图中腿子颜色根据选中状态动态更新
- 新增颜色图例：
  - 红色：普通腿子
  - 绿色：选中腿子
- 保持与原有中心点、连线等功能的兼容性

## 默认行为
- 进入单腿控制界面时，默认选中腿子1
- 腿子1在主界面图表中变为绿色显示
- 十字键中心显示"腿子1"

## 窗口管理
- 单腿控制界面为独立窗口
- 支持多次打开（若已存在则置前显示）
- 关闭窗口时自动恢复所有腿子为红色状态

## 集成性
- 与现有系统完全兼容
- 不影响原有的控制和监控功能
- 可以与主控制系统同时运行
- 日志系统完整记录操作信息

## 技术实现
- 使用Tkinter创建独立控制窗口
- Matplotlib实现单腿详细视图
- 实时数据更新机制
- 状态同步机制确保颜色显示正确

## 测试验证
创建了完整的测试脚本 `test_single_leg_gui.py`，可以独立运行验证所有功能的正确性。